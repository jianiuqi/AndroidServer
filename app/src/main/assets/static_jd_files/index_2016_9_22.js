M.define("thread",function(a){var b=function(c){this.init(c)};M.object.merge(b.prototype,{init:function(d){this.eventState=this.eventState||{};this.eventList=[];this.closeList=[];this.openList=[];this.time=1000;if(M.object.isObject(d)){if(d.time&&M.object.isNumber(d.time)){this.time=d.time}this.isStart=false;if(d.eventList&&M.object.isArray(d.eventList)){this.eventList=d.eventList}if(this.eventList.length>0){for(var c=0;c<this.eventList.length;c++){if(this.eventList[c].name){this.eventState[this.eventList[c].name]=true}else{throw new Error("one eventName is null")}}}}},call:function(){var d=this;if(d.eventList.length>0){for(var c=0;c<d.eventList.length;c++){if(d.eventList[c]&&d.eventList[c].event){if(d.eventState[d.eventList[c].name]){d.runFunction(d.eventList[c]);d.runObject(d.eventList[c])}}}for(var c=0;c<d.closeList.length;c++){d.eventState[d.closeList[c]]=false}for(var c=0;c<d.openList.length;c++){d.eventState[d.openList[c]]=true}d.openList=[];d.closeList=[]}if(!d.stopThread){d.threadId=setTimeout(function(){d.isStart=true;d.call()},d.time)}},runFunction:function(e){var d=this;if(M.object.isFunction(e.event)){var c=null;if(e.source){c=e.source}if(e.name){d.eventState[e.name]=true}e.event.call(c,d.time)}},runObject:function(e){var d=this;if(M.object.isObject(e.event)){var c=null;if(e.source){c=e.source}if(M.object.isObject(e.event)&&M.object.isFunction(e.event.go)){e.event.go.call(c,d.time)}}},start:function(){var c=this;if(!c.isStart){c.threadId=setTimeout(function(){c.isStart=true;c.call()},c.time)}},openOne:function(c,e){var f=this;if(!M.object.isDefined(f.eventState[c])&&!f.eventState[c]){if(!e){f.eventState[c]=true}else{if(f.getOpenListIndex(c)==-1){f.openList.push(c);var d=f.getOpenListIndex(c);if(d>0){f.openList.splice(d,1)}}}}},closeOne:function(c,e){var f=this;if(!M.object.isDefined(f.eventState[c])&&f.eventState[c]){if(!e){f.eventState[c]=false}else{if(f.getCloseListIndex(c)!=-1){f.closeList.push(c);var d=f.getCloseListIndex(c);if(d>0){f.closeList.splice(d,1)}}}}},addOne:function(d,c){var e=this;if(M.object.isObject(d)){if(M.object.isObject(d)&&d.name){if(!c){e.eventState[d.name]=true}else{e.eventState[d.name]=false;e.openList.push(d.name)}e.eventList.push(d)}}},getCloseListIndex:function(d){var f=this;var c=-1;for(var e=0;e<f.closeList.length;e++){if(f.closeList[e]==d){c=e;break}}return c},getOpenListIndex:function(d){var f=this;var c=-1;for(var e=0;e<f.openList.length;e++){if(f.openList[e]==d){c=e;break}}return c},stop:function(){var c=this;if(!c.isStart){clearTimeout(c.threadId);c.stopThread=true}}});a.clazz=b});M.define("remoteStorage",function(b){var a=function(c,d){this.init(c,d)};M.object.merge(a.prototype,{init:function(c,e){this.op={WRITE:"W",READ:"R",DEL:"D",CLEAR:"X"};this.origin=c;this.path=e;this._iframe=null;this._iframeReady=false;this._queue=[];this._requests={};this._id=0;if(!this._iframe){var d=this;if(window.postMessage&&window.JSON&&window.localStorage){this._iframe=document.createElement("iframe");this._iframe.style.cssText="position:absolute;width:1px;height:1px;left:-9999px;";this._iframe.src=this.origin+this.path;document.body.appendChild(this._iframe);if(window.addEventListener){this._iframe.addEventListener("load",function(){d._iframeLoaded()},false);window.addEventListener("message",function(f){d._handleMessage(f)},false)}else{if(this._iframe.attachEvent){this._iframe.attachEvent("onload",function(){d._iframeLoaded()},false);window.attachEvent("onmessage",function(f){d._handleMessage(f)})}}}else{throw new Error("Unsupported browser.")}}},get:function(c,f){var d=this;var e=null;d._toSend({op:d.op.READ,key:c},f);return e},set:function(c,e,f){var d=this;d._toSend({key:c,op:d.op.WRITE,value:e},f)},remove:function(c,e){var d=this;d._toSend({key:c,op:d.op.DEL},e)},removeAll:function(d){var c=this;c._toSend({op:c.op.CLEAR},d)},_toSend:function(e,f){var d=this;var c={request:{key:e.key,id:++this._id,op:e.op,value:e.value},callback:f};if(d._iframeReady){d._sendRequest(c)}else{d._queue.push(c)}if(!d._iframe){d.init()}},_sendRequest:function(d){var c=this;c._requests[d.request.id]=d;c._iframe.contentWindow.postMessage(JSON.stringify(d.request),c.origin)},_iframeLoaded:function(){var e=this;e._iframeReady=true;if(e._queue.length){for(var d=0,c=this._queue.length;d<c;d++){e._sendRequest(e._queue[d])}e._queue=[]}},_handleMessage:function(c){var e=this;var d=JSON.parse(c.data);e._requests[d.id].callback&&e._requests[d.id].callback(d.key,d.value);delete e._requests[d.id]}});b.clazz=a});M.define("searchland",function(a){var b=function(c){this.init(c)};M.object.merge(b.prototype,{init:function(j){var d="searchland";this.formId=j.formId?j.formId:"";this.submitId=j.submitId?j.submitId:"";this.catelogyListId=j.catelogyListId?j.catelogyListId:"";this.isHome=j.isHome?j.isHome:false;this.renderId=j.renderId?j.renderId:"";this.closeSearchLandBtnId=j.closeSearchLandBtnId?j.closeSearchLandBtnId:"";this.claerKeywordBtnId=j.claerKeywordBtnId?j.claerKeywordBtnId:"";this.keywordId=j.keywordId?j.keywordId:"";this.searchPanelId=j.searchPanelId?j.searchPanelId:"";this.keyword=j.keyword?j.keyword:"";this.keywordIsObj=false;this.isSo=false;if(M.object.isObject(this.keyword)){this.keywordIsObj=true}else{this.keyword=M.string.decodeHtml(this.keyword)}this.searchHistoryLocalStorageName="searchhistory";this.searchHistoryId=M.genId(d);this.hotSearchId=M.genId(d);this.hotSearchBtn=M.genId(d);this.clearHistoryId=M.genId(d);this.hotKeyWordId=M.genId(d);this.isHome=j.isHome?j.isHome:false;this.localstorage=null;this.searchHistoryListIdList=[];this.hotKeyWordBtnIds=[];this.searchliIdList=[];this.searchliTagIdList=[];this.searchHistoryList=null;this.hotKeywordIndex=0;this.searchLoop=false;this.openSearchLoad=false;this.isHistoryPanel=false;this.showFuncObj=j.showFuncObj?j.showFuncObj:null;this.hideFuncObj=j.hideFuncObj?j.hideFuncObj:null;if(window.location.href.indexOf("//so.m.jd.com")>0){this.isSo=true;this.localstorage=M.localstorage}else{var g=true;if(g){try{window.localStorage.setItem("M_test",1)}catch(h){g=false;M.log("localStorage无法set","error")}try{window.localStorage.getItem("M_test")}catch(h){g=false;M.log("localStorage无法get","error")}try{window.localStorage.removeItem("M_test")}catch(h){g=false;M.log("localStorage无法remove","error")}}var c="so.m.jd.com";if(window.location.href.indexOf("https://")>=0){c="https://"+c}else{c="http://"+c}if(g){this.isSo=false;this.localstorage=new (M.exports("remoteStorage").clazz)(c,"/solocalocalstorage.html")}else{this.isSo=true;this.localstorage=M.localstorage}}if(this.keywordIsObj){var i=this.keyword.showWord?this.keyword.showWord:"";if(this.keyword.keyword){if(this.keyword.keyword!=this.keyword.realWord){var f=M.string.decodeHtml(this.keyword.keyword);$("#"+this.keywordId).val(f)}else{$("#"+this.keywordId).val("")}}else{$("#"+this.keywordId).val("")}$("#"+this.keywordId).attr("placeholder",i)}else{$("#"+this.keywordId).val(this.keyword)}$("#"+this.keywordId).addClass("hilight1")},mainHtml:function(){var d=this;var c=[];c.push('<div id="search_land_searchland" class="search-land">');c.push("</div>");return c.join("")},loadHotKeyword:function(){var c=this;if(!c.hotKeyword){M.http.ajax({url:"//so.m.jd.com/ware/hotKeyWord.action?_format_=json",success:function(f){if(f&&f.hotKeyWord){var j=f.hotKeyWord;try{j=JSON.parse(j);var h=j.def?j.def:[];var d=j.owner?j.owner:[];if(h.length>0){c.hotKeyword=h;if(d.length>0){for(var g=0;g<d.length;g++){if(d[g].hotWord&&d[g].num&&d[g].num<=h.length){if(M.object.isString(d[g].hotWord)){c.hotKeyword[d[g].num-1]=d[g].hotWord}}}}}else{c.hotKeyword=[];if(d.length>0){for(var g=0;g<d.length;g++){c.hotKeyword.push(d[g].hotWord)}}}}catch(k){c.hotKeyword=[]}}else{c.hotKeyword=[]}c.searchHotKeyHtml()},error:function(){c.hotKeyword=[];c.searchHotKeyHtml()}})}else{c.searchHotKeyHtml()}},searchHotKeyHtml:function(){var e=this;var d=[];if(e.hotKeyword&&e.hotKeyword.length>0){e.hotKeyWordBtnIds=[];d.push('<div id="'+e.hotSearchId+'" class="hot-search">');d.push('<div class="hot-search-head cf">');d.push("<p>热门搜索</p>");d.push('<i class="around-pic" id="'+e.hotSearchBtn+'"></i>');d.push("</div>");d.push('<div id="'+e.hotKeyWordId+'" class="hot-search-tags">');for(var c=0;c<6&&c<e.hotKeyword.length;c++){var f="searchland_hotKeywordList_"+c;e.hotKeyWordBtnIds.push(f);e.hotKeywordIndex=c;d.push("<span>");d.push('<a href="javascript:void(0);" id="'+f+'"><i>'+e.hotKeyword[c]+"</i></a>");d.push("</span>")}}d.push("</div>");d.push("</div>");$("#search_land_searchland").append(d.join(""));e.searchHotKeyBind()},searchHotKeyBind:function(){var d=this;if(d.hotKeyWordBtnIds.length>0){for(var c=0;c<d.hotKeyWordBtnIds.length;c++){$("#"+d.hotKeyWordBtnIds[c]).on("click",function(){var e=$.trim($(this).text());if(e!=""){d.searchLandSubmit(e,"MSearch_HotWords")}})}$("#"+d.hotSearchBtn).on("click",function(){var f=0;var h=[];for(var g=d.hotKeywordIndex+1,e=g+6;g<e&&g<d.hotKeyword.length;g++){f++;d.hotKeywordIndex=g;h.push(d.hotKeyword[g])}if(f<6){for(var g=0,e=6-f;g<e&&g<d.hotKeyword.length;g++){f++;d.hotKeywordIndex=g;h.push(d.hotKeyword[g])}}$(this).addClass("turn-around");d.sendMping("MSearch_ChangeKeyWords");setTimeout(function(){$("#"+d.hotSearchBtn).removeClass("turn-around")},800);var k=$("#"+d.hotKeyWordId).find("a");d.searchLandHotKeywordRecursiveFade(k,h,0,f)})}},searchLandHotKeywordRecursiveFade:function(c,g,d,f){var h=this;if(d<f){for(var e=d;e<f;e++){if(e<=2){$(c[e]).find("i").addClass("move1")}else{$(c[e]).find("i").addClass("move2")}}setTimeout(function(){for(var j=d;j<f;j++){if(j<=2){$(c[j]).find("i").text(g[j])}}},310);setTimeout(function(){for(var j=d;j<f;j++){if(j<=2){$(c[j]).find("i").removeClass("move1")}}},500);setTimeout(function(){for(var j=d;j<f;j++){if(j>2){$(c[j]).find("i").text(g[j])}}},410);setTimeout(function(){for(var j=d;j<f;j++){if(j>2){$(c[j]).find("i").text(g[j]);$(c[j]).find("i").removeClass("move2")}}},750)}},searchHistoryHtml:function(f){var g=this;var d=[];try{g.searchHistoryList=JSON.parse(f)}catch(h){g.searchHistoryList=null;g.localstorage.remove(g.searchHistoryLocalStorageName)}if(g.searchHistoryList!=null&&!M.object.isArray(g.searchHistoryList)){g.searchHistoryList=null;g.localstorage.remove(g.searchHistoryLocalStorageName)}if(g.searchHistoryList&&g.searchHistoryList.length>0){d.push('<div id="'+g.searchHistoryId+'" class="recent-search">');d.push('<div class="recent-search-head cf">');d.push("<p>最近搜索</p>");d.push('<i id="'+g.clearHistoryId+'" class="garbage-pic"></i>');d.push("</div>");d.push('<div class="recent-search-tags">');g.searchHistoryListIdList=[];for(var c=0;c<g.searchHistoryList.length;c++){var j="searchland_searchHistoryList_"+c;g.searchHistoryListIdList.push(j);d.push("<span>");d.push('<a id="'+j+'" searchland_index="'+c+'" href="javascript:void(0);">'+g.searchHistoryList[c].text+"</a>");d.push("</span>")}d.push("</div>");d.push("</div>")}$("#search_land_searchland").html(d.join(""));g.searchHistoryBind();g.loadHotKeyword()},searchHistoryBind:function(){var d=this;if(d.searchHistoryListIdList&&d.searchHistoryListIdList.length>0){for(var c=0;c<d.searchHistoryListIdList.length;c++){$("#"+d.searchHistoryListIdList[c]).on("click",function(){var e=$(this).attr("searchland_index");var f=d.searchHistoryList[e];d.searchLandSubmit(f,"MSearch_HistoryRecords")})}$("#"+d.clearHistoryId).on("click",function(){if(confirm("确定要清空吗?")){d.sendMping("MSearch_ClearHistory");d.clearHistory();$("#"+d.controlId).html("");$("#"+d.clearHistoryId).parent().parent().attr("style","display:none;")}})}},searchLoadControl:function(){var d=this;var c=$("#"+d.keywordId).val().trim();if(c==""&&d.searchLoop){$("#"+d.claerKeywordBtnId).attr("style","display:none;");if(!d.isHistoryPanel){d.searchHistoryFromStorage(d.searchHistoryHtml);d.isHistoryPanel=true}}else{if(c!=""&&d.oldkeyword!=c&&d.searchLoop){$("#"+d.claerKeywordBtnId).attr("style","");d.searchKeyLoad(c)}}setTimeout(function(){d.searchLoadControl()},500)},searchKeyLoad:function(c){var d=this;d.searchLoop=false;d.oldkeyword=c;d.searchLocalStorage=false;M.http.ajax({url:"//so.m.jd.com/ware/searchSuggestion.action",data:{keyword:c,_format_:"json"},success:function(f){if(f&&f.searchTipList&&d.openSearchLoad){var e=JSON.parse(f.searchTipList);if(e.length>0){d.tipArray=e;$("#search_land_searchland").html(d.serchKeyHtml(d.tipArray));d.serchKeyBind()}d.searchLoop=true;d.isHistoryPanel=false}else{if(d.openSearchLoad){d.searchLoop=true;d.isHistoryPanel=false}}},error:function(e){if(d.openSearchLoad){d.searchLoop=true;d.isHistoryPanel=false}}})},serchKeyHtml:function(m){var c=this;c.searchliIdList=[];var e=[];if(m&&m.length>0){e.push('<ul class="association-normal">');for(var h=0;h<m.length;h++){var d="searchland_li_"+h;c.searchliIdList.push(d);var l=m[h].text;e.push('<li searchland_index="'+h+'" id="'+d+'">');e.push('<a href="javascript:void(0);">');var k="association-product-name";if(m[h].otherAttr){if(m[h].otherAttr.isSearchShop){e.push('<i class="shop-pic"></i>');k="association-shop-name"}}e.push('<span class="'+k+'">'+l+"</span>");if(m[h].otherAttr&&m[h].otherAttr.tag&&m[h].otherAttr.tag.length>0){for(var g=0;g<m[h].otherAttr.tag.length&&g<3;g++){if(m[h].otherAttr.tag[g].tagsearchquery&&m[h].otherAttr.tag[g].tagshowquery){var f=M.genId("searchland_li_tag");c.searchliTagIdList.push(f);e.push('<span pingparam="'+(g+1)+'" id="'+f+'" tagsearchquery="'+m[h].otherAttr.tag[g].tagsearchquery+'" class="association-product-btn">'+m[h].otherAttr.tag[g].tagshowquery+"</span>")}}}e.push("</a>");e.push("</li>")}e.push("</ul>")}return e.join("")},serchKeyBind:function(d){var e=this;if(e.searchliIdList.length>0){for(var c=0;c<e.searchliIdList.length;c++){$("#"+e.searchliIdList[c]).on("click",function(i){var g=$(this).attr("searchland_index");var h=e.tipArray[g];e.searchLandSubmit(h,"MSearch_SearchDropDownAssociationalWords")})}}if(e.searchliTagIdList.length>0){while(e.searchliTagIdList.length>0){var f=e.searchliTagIdList.pop();$("#"+f).on("click",function(i){var h=$(this).attr("tagsearchquery");var g=$(this).attr("pingparam");e.sendMping("MSearch_AssociationLabel",{event_param:g,event_level:"2"});e.searchLandSubmit(h);i.stopPropagation()})}}},sendMping:function(f,c){if(f){try{var g=new MPing.inputs.Click(f);if(c){g=M.object.merge(g,c)}var d=new MPing();d.send(g)}catch(h){}}},clearHistory:function(){var c=this;c.localstorage.remove(c.searchHistoryLocalStorageName)},searchHistoryFromStorage:function(d){var f=this;if(f.isSo){var c=f.localstorage.get(f.searchHistoryLocalStorageName);d.call(f,c)}else{try{f.localstorage.get(f.searchHistoryLocalStorageName,function(h,e){d.call(f,e)})}catch(g){d.call(f,null)}}},searchLandSubmit:function(c,d){var f=this;var e=null;var g=null;if(M.object.isObject(c)){g=c;e=JSON.parse(g.value)}else{g={};e={};if(f.keywordIsObj&&c==f.keyword.showWord){g.text=f.keyword.showWord;e.keyword=f.keyword.realWord;g.value=JSON.stringify(e);g.text=c}else{e.keyword=c;g.value=JSON.stringify(e);g.text=c}}if(e.keyword){f.sendMping(d,{event_param:e.keyword});$("#"+f.keywordId).val(e.keyword);e.catelogyList&&$("#"+f.catelogyListId).val(JSON.stringify(e.catelogyList));f.searchLandAddHistory(g,function(){var h=this;if(g.otherAttr&&g.otherAttr.isSearchShop){$("#"+h.formId).attr("action","//so.m.jd.com/shop/searchShop.action")}else{$("#"+h.formId).attr("action","//so.m.jd.com/ware/search.action")}$("#"+h.formId).submit();h.searchLoop=false})}},searchLandAddHistory:function(e,c){var d=this;d.searchHistoryFromStorage(function(h){var j=this;try{h=JSON.parse(h)}catch(k){h=null;try{j.localstorage.remove(j.searchHistoryLocalStorageName)}catch(k){}}if(!M.object.isArray(h)){h=null;j.localstorage.remove(j.searchHistoryLocalStorageName)}e.text=j.makeSearchName(e.text);delete e.tipNumber;if(h&&h.length>0){var f=[e];for(var g=0;g<h.length;g++){if(f.length==18){break}if(h[g].text!=e.text){f.push(h[g])}}h=f}else{h=[];h.push(e)}j.localstorage.set(j.searchHistoryLocalStorageName,JSON.stringify(h));c.call(j)})},makeSearchName:function(c){if(c.length>=30){c=c.substring(0,30)}return c},searchTransformation:function(){var f=this;if(!f.openSearchLoad){var c=$("body").children("div");$("body").removeClass("hide-landing");$("body").addClass("show-landing");$("body").addClass("history-color");if(!f.isHome){$("#layout_appdown").attr("style","display:none;")}for(var d=0;d<c.length;d++){if($(c[d]).attr("id")!="search_land_searchland"&&!$(c[d]).attr("search_land_searchTransformation_show")){$(c[d]).attr("style","display:none;")}}$("body").children("footer").attr("style","display:none;");if(f.showFuncObj&&f.showFuncObj.func){var e=f.showFuncObj.source?f.showFuncObj.source:null;f.showFuncObj.func.call(e)}$("#"+f.searchPanelId).removeClass("on-blur");$("#"+f.searchPanelId).addClass("on-focus");window.scrollTo(0,1);f.openSearchLoad=true;f.searchLoop=true;f.isHistoryPanel=false}else{$("body").removeClass("show-landing");$("body").removeClass("history-color");$("body").addClass("hide-landing");var c=$("body").children("div");if(!f.isHome&&!$("#layout_appdown").attr("search_land_searchTransformation_show")){$("#layout_appdown").attr("style","")}$("#search_land_searchland").html("");for(var d=0;d<c.length;d++){if($(c[d]).attr("id")!="search_land_searchland"&&!$(c[d]).attr("search_land_searchTransformation_show")){$(c[d]).attr("style","")}}$("body").children("footer").attr("style","");if(f.hideFuncObj&&f.hideFuncObj.func){var e=f.hideFuncObj.source?f.hideFuncObj.source:null;f.hideFuncObj.func.call(e)}f.openSearchLoad=false;f.searchLoop=false;f.searchLocalStorage=false;f.isHistoryPanel=false;f.oldkeyword="";$("#"+f.controlId).html("");$("#"+f.searchPanelId).removeClass("on-focus");$("#"+f.searchPanelId).addClass("on-blur");$("#"+f.hotKeyWordId).show();$("#"+f.hotKeyWordheadId).show()}},render:function(){var c=this;if(M.object.isObject(c.renderId)||M.object.isArray(c.renderId)){$(c.renderId).append(c.mainHtml())}else{$("#"+c.renderId).append(c.mainHtml())}$("body").addClass((c.isHome?"mhome":""));$("body").addClass("hide-landing");$("#"+c.keywordId).on("click",function(g){var d=null;if(c.isHome){if(c.openSearchLoad){d="MSearch_Search"}else{d="MHome_Search"}}else{d="MProductList_Search"}c.sendMping(d);if(!c.openSearchLoad){if(c.landSearchWordHide){$("#"+c.keywordId).val("")}else{var h=c.keyword;if(c.keywordIsObj){h=c.keyword.showWord?c.keyword.showWord:"";if(c.keyword.keyword){if(c.keyword.keyword!=c.keyword.realWord){var f=M.string.decodeHtml(c.keyword.keyword);$("#"+c.keywordId).val(f)}else{$("#"+c.keywordId).val("")}}$("#"+c.keywordId).attr("placeholder",h)}else{$("#"+c.keywordId).val(h)}}c.searchTransformation()}});$("#"+c.keywordId).on("keydown",function(f){if(f.keyCode=="13"){var d=$.trim($("#"+c.keywordId).val());var g=$.trim($("#"+c.keywordId).attr("placeholder"));if(d==""&&g!=""){d=g}if(d!=""){c.searchLandSubmit(d,"MSearch_Searchthi")}}return});$("#"+c.closeSearchLandBtnId).on("click",function(){if(c.openSearchLoad){c.searchTransformation();var e=c.keyword;if(c.keywordIsObj){e=c.keyword.showWord?c.keyword.showWord:"";if(c.keyword.keyword){if(c.keyword.keyword!=c.keyword.realWord){var d=M.string.decodeHtml(c.keyword.keyword);$("#"+c.keywordId).val(d)}else{$("#"+c.keywordId).val("")}}else{$("#"+c.keywordId).val("")}$("#"+c.keywordId).attr("placeholder",e)}else{$("#"+c.keywordId).val(e)}$("#"+c.keywordId).addClass("hilight1")}});$("#"+c.submitId).on("click",function(){var e=$.trim($("#"+c.keywordId).val());var f=$.trim($("#"+c.keywordId).attr("placeholder"));if(e==""&&f!=""){e=f}if(e!=""){var d=null;if(c.isHome){if(c.openSearchLoad){d="MSearch_SearchButton"}else{d="MHome_SearchButton"}}else{d="MSearch_SearchButton"}c.searchLandSubmit(e,d)}});$("#"+c.keywordId).on("keyup",function(){if($(this).val()!=c.keyword){$(this).removeClass("hilight1");$(this).addClass("hilight2")}else{$(this).removeClass("hilight2");$(this).addClass("hilight1")}});$("#"+c.claerKeywordBtnId).on("click",function(){$("#"+c.keywordId).val("");$("#"+c.keywordId)[0].focus();$(this).attr("style","display:none;")});c.searchLoadControl()}});a.clazz=b});M.define("Imglazyload",function(a){var b=function(d){this.init()};M.object.merge(b.prototype,{init:function(){this.imgmp={};this.sendindex=8},lazyLad:function(n){var f=this;var d=$(window).height();var m=$("img[imgsrc]");var j=$(window).scrollTop();var k=n&&!!rTimeArr;for(var l=0,o=m.size();l<o;l++){currentObj=$(m[l]);var q=currentObj.offset().top-d-200;if(parseInt(j)>=parseInt(q)){currentObj.addClass("opa1");var h=currentObj.attr("imgsrc").replace(/http:/g,"");if(k){try{var g=h.split(".com")[0];if(!!g&&!!!f.imgmp[g]){f.imgmp[g]=1;rTimeArr[f.sendindex]={sTime:new Date()};currentObj[0].currentindex=f.sendindex++;currentObj[0].onload=function(){rTimeArr[this.currentindex].time=new Date()}}}catch(p){}}currentObj.attr("src",h);currentObj.removeAttr("imgsrc");if(!!currentObj.attr("imgtitle")){currentObj[0].onload=function(){var i=$(this).parent().is(".graphic-img")||$(this).parent().is(".show-img");if(i){$(this).closest(".graphic-separation").find(".space-img").css({opacity:0});var e=$(this).closest(".graphic-img").siblings(".graphic-text");if(e.length>0){e.css({opacity:"1"})}}}}}}},squareImg:function(d){$(d).each(function(){var e=$(this).height();if(e>10){$(this).css({width:e})}})}});var c=b;a.clazz=b});var slide=(function(){var a=function(c){return new b(c)};function b(c){this.elem=c;this.oBox=document.querySelector(c);this.aLi=document.querySelectorAll(c+" [data-ul-child=child]");this.oUl=document.querySelector(c+" [data-slide-ul=firstUl]");this.now=0;this.on0ff=false}b.prototype={init:function(c){var c=c||{},d=this.aLi;this.defaults={startIndex:0,loop:false,smallBtn:false,number:false,laseMoveFn:false,location:false,preDef:"lnr",autoPlay:false,autoHeight:false,preFn:null,lastImgSlider:false,playTime:6000,callback:null,verticalCenter:false,fullScreen:true,total:0};b.extend(this.defaults,c);this.now=this.defaults.startIndex;this.initBtn();this.liInit();this.bind();if(this.aLi.length<2){if(this.defaults.smallBtn){this.oSmallBtn.style.display="none"}if(this.defaults.number){this.pageNub.style.display="none"}this.defaults.autoPlay=false;this.defaults.loop=false}if(this.defaults.autoPlay){this.pause();this.play()}},initBtn:function(){this.aLi=document.querySelectorAll(this.elem+" [data-ul-child=child]");var d=this.aLi;if(this.defaults.callback){this.defaults.callback(1)}if(this.defaults.smallBtn){this.oSmallBtn=document.querySelector(this.elem+' [data-small-btn="smallbtn"]');this.oSmallBtn.innerHTML=this.addSmallBtn();this.btns=document.querySelectorAll(this.elem+' [data-ol-btn="btn"]');for(var c=0;c<this.btns.length;c++){this.btns[c].className=""}this.btns[b.getNow(this.now,d.length)].className="active"}if(this.defaults.number){this.pageNub=document.getElementById("page-nub");this.slideNub=document.getElementById("slide-nub");this.slideSum=document.getElementById("slide-sum");this.slideNub.innerHTML=(this.now+1)%(this.aLi.length);this.slideSum.innerHTML=this.aLi.length}this.defaults.total=this.aLi.length;if(this.aLi.length==2||this.aLi.length==3){if(this.defaults.loop){this.oUl.innerHTML+=this.oUl.innerHTML}this.aLi=document.querySelectorAll(this.elem+" [data-ul-child=child]");this.need=true}},bind:function(){var f=this.oBox,e=b._device();if(!e.hasTouch){f.style.cursor="pointer";f.ondragstart=function(g){if(g){return false}return true}}var d="onorientationchange" in window;var c=d?"orientationchange":"resize";window.addEventListener(c,this);if(this.aLi.length<2){if(this.defaults.smallBtn){this.oSmallBtn.style.display="none"}if(this.defaults.number){this.pageNub.style.display="none"}return}f.addEventListener(e.startEvt,this);window.addEventListener("touchcancel",this);if(navigator.userAgent.indexOf("baidubrowser")!=-1){window.addEventListener("focusin",this);window.addEventListener("focusout",this)}else{window.addEventListener("blur",this);window.addEventListener("focus",this)}},liInit:function(){var e=this.aLi,g=e.length,c=this.aLi[0].offsetWidth,k=this.aLi[0].offsetHeight,o=this.oUl,n=this.oBox.offsetWidth,d=320,f=this.now,m=this;if(this.defaults.preFn){this.defaults.preFn()}for(var j=0;j<g;j++){b.setStyle(e[j],{WebkitTransition:"all 0ms ease",transition:"all 0ms ease",height:"auto"})}if(this.defaults.fullScreen){o.style.width=n*g+"px";if(this.defaults.autoHeight){d=this.oBox.offsetWidth;if(d>=640){d=640}for(var j=0;j<g;j++){e[j].style.width=d+"px"}var l=e[0].getElementsByTagName("img")[0];if(l){var h=new Image();h.onload=function(){m.oBox.style.height=e[0].offsetHeight+"px";m.oUl.style.height=e[0].offsetHeight+"px";if(m.defaults.verticalCenter){if(m.oBox.style.height.replace("px","")>=document.documentElement.clientHeight){m.oBox.parentNode.style.top="50px";m.oBox.parentNode.style.marginTop=0}else{m.oBox.parentNode.style.top="50%";m.oBox.parentNode.style.marginTop="-50%"}}for(var p=0;p<e.length;p++){e[p].style.height=e[0].offsetHeight+"px"}};h.src=l.src}else{this.oBox.style.height=e[0].offsetHeight+"px"}}}else{d=this.oBox.offsetWidth;if(d>=640){d=640}c=(d/320)*225;k=(d/320)*150;for(var j=0;j<g;j++){e[j].style.width=c+"px";e[j].style.height=k+"px"}o.style.width=c*g+"px";this.oBox.style.height=k+"px";this.oUl.style.height=k+"px";e[0].style.padding="0";n=c}if(this.defaults.loop){for(var j=0;j<g;j++){b.setStyle(e[j],{position:"absolute",left:0,top:0});if(j==b.getNow(f,g)){b.setStyle(e[j],{WebkitTransform:"translate3d("+0+"px, 0px, 0px)",transform:"translate3d("+0+"px, 0px, 0px)",zIndex:10})}else{if(j==b.getPre(f,g)){b.setStyle(e[j],{WebkitTransform:"translate3d("+-n+"px, 0px, 0px)",transform:"translate3d("+-n+"px, 0px, 0px)",zIndex:10})}else{if(j==b.getNext(f,g)){b.setStyle(e[j],{WebkitTransform:"translate3d("+n+"px, 0px, 0px)",transform:"translate3d("+n+"px, 0px, 0px)",zIndex:10})}else{if(j==b.getNextNew(f,g)){b.setStyle(e[j],{WebkitTransform:"translate3d("+n*2+"px, 0px, 0px)",transform:"translate3d("+n*2+"px, 0px, 0px)",zIndex:10})}else{b.setStyle(e[j],{WebkitTransform:"translate3d("+-n+"px, 0px, 0px)",transform:"translate3d("+-n+"px, 0px, 0px)",zIndex:9})}}}}}}else{for(var j=0;j<g;j++){b.setStyle(e[j],{WebkitTransform:"translate3d("+f*-n+"px, 0px, 0px)",transform:"translate3d("+f*-n+"px, 0px, 0px)"})}}},handleEvent:function(d){var c=b._device(),e=this.oBox;switch(d.type){case c.startEvt:if(this.defaults.autoPlay){this.pause()}this.startHandler(d);break;case c.moveEvt:if(this.defaults.autoPlay){this.pause()}this.moveHandler(d);break;case c.endEvt:if(this.defaults.autoPlay){this.pause();this.play()}this.endHandler(d);break;case"touchcancel":if(this.defaults.autoPlay){this.pause();this.play()}this.endHandler(d);break;case"orientationchange":this.orientationchangeHandler();break;case"resize":this.orientationchangeHandler();break;case"focus":if(this.defaults.autoPlay){this.pause();this.play()}break;case"blur":if(this.defaults.autoPlay){this.pause()}break;case"focusin":if(this.defaults.autoPlay){this.pause();this.play()}break;case"focusout":if(this.defaults.autoPlay){this.pause()}break}},startHandler:function(e){this.on0ff=true;var d=b._device(),f=d.hasTouch,h=this.oBox,c=this.now,g=this.aLi;h.addEventListener(d.moveEvt,this);h.addEventListener(d.endEvt,this);this.downTime=Date.now();this.downX=f?e.targetTouches[0].pageX:e.clientX-h.offsetLeft;this.downY=f?e.targetTouches[0].pageY:e.clientY-h.offsetTop;this.startT=b.getTranX(g[b.getNow(c,g.length)]);this.startNowT=b.getTranX(g[b.getNow(c,g.length)]);this.startPreT=b.getTranX(g[b.getPre(c,g.length)]);this.startNextT=b.getTranX(g[b.getNext(c,g.length)]);this.startNextN=b.getTranX(g[b.getNextNew(c,g.length)]);b.stopPropagation(e)},moveHandler:function(q){var n=this.oBox,e=b._device();if(this.on0ff){var o=e.hasTouch;var j=o?q.targetTouches[0].pageX:q.clientX-n.offsetLeft;var h=o?q.targetTouches[0].pageY:q.clientY-n.offsetTop;var c=this.aLi,g=c.length,d=this.now,t=c[0].offsetWidth;if(this.defaults.preDef=="all"){b.stopDefault(q)}for(var m=0;m<g;m++){b.setStyle(c[m],{WebkitTransition:"all 0ms ease",transition:"all 0ms ease"})}if(Math.abs(j-this.downX)<Math.abs(h-this.downY)){if(this.defaults.preDef=="tnd"&&this.defaults.preDef!="all"){b.stopDefault(q)}}else{if(Math.abs(j-this.downX)>10){if(this.defaults.preDef=="lnr"&&this.defaults.preDef!="all"){b.stopDefault(q)}if(this.defaults.loop){k=(this.startNowT+j-this.downX).toFixed(4);var s=(this.startPreT+j-this.downX).toFixed(4);var f=(this.startNextT+j-this.downX).toFixed(4);var l=(this.startNextN+j-this.downX).toFixed(4);b.move(c[b.getNow(d,g)],k,10,this.defaults.fullScreen);b.move(c[b.getPre(d,g)],s,10,this.defaults.fullScreen);b.move(c[b.getNext(d,g)],f,10,this.defaults.fullScreen);b.move(c[b.getNextNew(d,g)],l,10,this.defaults.fullScreen)}else{var k=b.getTranX(c[d]);if(k>0){var p=((this.startT+j-this.downX)/3).toFixed(4);for(var m=0;m<g;m++){b.move(c[m],p)}}else{if(Math.abs(k)>=Math.abs((g-1)*t)){var p=(this.startT+(j-this.downX)/3).toFixed(4);for(var m=0;m<g;m++){b.move(c[m],p)}if(this.defaults.laseMoveFn&&typeof this.defaults.laseMoveFn=="function"){var r=(p-this.startT).toFixed(4);this.defaults.laseMoveFn(r)}}else{var p=(this.startT+j-this.downX).toFixed(4);for(var m=0;m<g;m++){b.move(c[m],p)}}}}}}}else{n.removeEventListener(e.moveEvt,this);n.removeEventListener(e.endEvt,this)}b.stopPropagation(q)},endHandler:function(i){i.stopPropagation();this.on0ff=false;var f=Date.now(),e=b._device(),h=e.hasTouch,g=this.oBox,l=h?i.changedTouches[0].pageX:i.clientX-g.offsetLeft,k=h?i.changedTouches[0].pageY:i.clientY-g.offsetTop,c=this.aLi,j=c[0].offsetWidth,d=b.getTranX(c[b.getNow(this.now,c.length)]);if(l-this.downX<30&&l-this.downX>=0&&Math.abs(k-this.downY)<30){this.tab(d,"+=");return"click"}else{if(l-this.downX>-30&&l-this.downX<=0&&Math.abs(k-this.downY)<30){this.tab(d,"-=");return"click"}else{if(Math.abs(k-this.downY)-Math.abs(l-this.downX)>30&&l-this.downX<0){this.tab(d,"-=");return}if(Math.abs(k-this.downY)-Math.abs(l-this.downX)>30&&l-this.downX>0){this.tab(d,"+=");return}if(l<this.downX){if(this.downX-l>j/3||f-this.downTime<200){this.now++;this.tab(d,"++");return"left"}else{this.tab(d,"+=");return"stay"}}else{if(l-this.downX>j/3||f-this.downTime<200){this.now--;this.tab(d,"--");return"right"}else{this.tab(d,"-=");return"stay"}}}}b.stopPropagation(i);g.removeEventListener(e.moveEvt,this);g.removeEventListener(e.endEvt,this)},tab:function(e,l,f){var c=this.aLi,k=c.length,r=c[0].offsetWidth,q=this.oBox,g=b._device(),p=this,d=this.now;if(this.defaults.callback&&(l=="++"||l=="--")){this.defaults.callback((b.getNow(d,k)+1)%this.defaults.total==0?this.defaults.total:(b.getNow(d,k)+1)%this.defaults.total)}$(c[b.getNow(p.now,k)]).addClass("active").siblings().removeClass("active");if(this.defaults.loop){if(d<0){d=k-1;this.now=k-1}for(var o=0;o<k;o++){if(o==b.getPre(d,k)){var h;switch(l){case"++":h=300;break;case"--":h=0;break;case"+=":h=0;break;case"-=":h=300;break;default:break}b.setStyle(c[b.getPre(d,k)],{WebkitTransform:"translate3d("+-r+"px, 0px, 0px)",transform:"translate3d("+-r+"px, 0px, 0px)",zIndex:10,WebkitTransition:"all "+h+"ms ease",transition:"all "+h+"ms ease"});if(!p.defaults.fullScreen){b.setStyle(c[b.getPre(d,k)],{padding:"0.8%"})}}else{if(o==b.getNow(d,k)){b.setStyle(c[b.getNow(d,k)],{WebkitTransform:"translate3d("+0+"px, 0px, 0px)",transform:"translate3d("+0+"px, 0px, 0px)",zIndex:10,WebkitTransition:"all "+300+"ms ease",transition:"all "+300+"ms ease"});if(!p.defaults.fullScreen){b.setStyle(c[b.getNow(d,k)],{padding:"0"})}}else{if(o==b.getNext(d,k)){var h=300;switch(l){case"++":h=0;break;case"--":h=300;break;case"+=":h=300;break;case"-=":h=0;break;default:break}b.setStyle(c[b.getNext(d,k)],{WebkitTransform:"translate3d("+r+"px, 0px, 0px)",transform:"translate3d("+r+"px, 0px, 0px)",zIndex:10,WebkitTransition:"all "+h+"ms ease",transition:"all "+h+"ms ease"});if(!p.defaults.fullScreen){b.setStyle(c[b.getNext(d,k)],{padding:"0.8%"})}}else{if(o==b.getNextNew(d,k)){var h;switch(l){case"++":h=0;break;case"--":h=300;break;case"+=":h=300;break;case"-=":h=0;break;default:break}b.setStyle(c[b.getNextNew(d,k)],{WebkitTransform:"translate3d("+r*2+"px, 0px, 0px)",transform:"translate3d("+r*2+"px, 0px, 0px)",zIndex:10,WebkitTransition:"all "+h+"ms ease",transition:"all "+h+"ms ease"});if(!p.defaults.fullScreen){b.setStyle(c[b.getNextNew(d,k)],{padding:"0.8%"})}}else{b.setStyle(c[o],{WebkitTransform:"translate3d("+r*2+"px, 0px, 0px)",transform:"translate3d("+r*2+"px, 0px, 0px)",zIndex:9,WebkitTransition:"all "+0+"ms ease",transition:"all "+0+"ms ease"})}}}}}}else{for(var o=0;o<k;o++){b.setStyle(c[o],{WebkitTransition:"all "+300+"ms ease",transition:"all "+300+"ms ease"})}if(d<=0){d=0;this.now=0}if(d>k-1){if(f){d=0;this.now=0}else{d=k-1;this.now=k-1}}for(var n=0;n<k;n++){b.setStyle(c[n],{WebkitTransform:"translate3d("+(-d*r)+"px, 0px, 0px)",transform:"translate3d("+(-d*r)+"px, 0px, 0px)"})}}if(this.defaults.smallBtn){for(var o=0;o<this.btns.length;o++){this.btns[o].className=""}if(this.need){this.btns[b.getNow(d,k/2)].className="active"}else{this.btns[b.getNow(d,k)].className="active"}}if(this.defaults.number){this.slideNub.innerHTML=((b.getNow(d,k)+1)%this.defaults.total==0?this.total:(b.getNow(d,k)+1)%this.defaults.total)}c[b.getNow(d,k)].addEventListener("webkitTransitionEnd",m,false);c[b.getNow(d,k)].addEventListener("transitionend",m,false);function m(){if(p.defaults.location){if(e<-(k-1)*r-r/5){if(p.defaults.lastImgSlider&&typeof p.defaults.lastImgSlider=="function"){p.defaults.laseMoveFn(0);p.defaults.lastImgSlider()}}}c[b.getNow(p.now,k)].removeEventListener("webkitTransitionEnd",m,false);c[b.getNow(p.now,k)].removeEventListener("transitionend",m,false)}},play:function(){var c=this;c.timer=setInterval(function(){c.now++;c.tab(null,"++",true)},this.defaults.playTime)},pause:function(){var c=this;clearInterval(c.timer)},orientationchangeHandler:function(){var c=this;setTimeout(function(){c.liInit()},300)},addSmallBtn:function(){var d="",e=this.aLi;for(var c=0;c<e.length;c++){if(c==this.defaults.startIndex){d+='<span class="active" data-ol-btn="btn"></span>'}else{d+='<span data-ol-btn="btn"></span>'}}return d},show:function(){this.oBox.style.display="inline-block"},hide:function(){this.oBox.style.display="none"}};b.extend=function(d,c){for(name in c){if(c[name]!==undefined){d[name]=c[name]}}};b.extend(b,{setStyle:function(d,c){for(name in c){d.style[name]=c[name]}},getTranX:function(e){var d=e.style.WebkitTransform||e.style.transform;var f=d.indexOf("translate3d(");var c=parseInt(d.substring(f+12,d.length-13));return c},_device:function(){var f=!!("ontouchstart" in window||window.DocumentTouch&&document instanceof window.DocumentTouch);var d="touchstart";var e="touchmove";var c="touchend";return{hasTouch:f,startEvt:d,moveEvt:e,endEvt:c}},getNow:function(d,c){return d%c},getPre:function(e,c){if(e%c-1<0){var d=c-1}else{var d=e%c-1}return d},getNext:function(e,d){var c=(e+1)%d;return c},getNextNew:function(e,d){var c=(e+2)%d;return c},move:function(g,d,f,c){var h=f||null;if(h){g.style.zIndex=h}b.setStyle(g,{WebkitTransform:"translate3d("+d+"px, 0px, 0px)",transform:"translate3d("+d+"px, 0px, 0px)"});if(!c){var e=parseFloat(d)/100;if(e>0.8){e=0.8}else{if(-0.8<e<0){e=(-e)}else{if(e<=-0.8){e=0.8}}}b.setStyle(g,{padding:e+"%"})}},stopDefault:function(c){if(c&&c.preventDefault){c.preventDefault()}else{window.event.returnValue=false}return false},stopPropagation:function(c){if(c&&c.stopPropagation){c.stopPropagation()}else{c.cancelBubble=true}}});return a})();M.define("index",function(a){var b=function(c){this.init(c)};M.object.merge(b.prototype,{init:function(d){this.threadTime=500;this.thread=new (M.exports("thread").clazz)({time:this.threadTime});this.imgHigth={all:0,brand:{},discount:{}};if(M.object.isObject(d)){this.url=d&&d.url?d.url:"";this.autoseckill=(d&&d.autoSeckill)?d.autoSeckill:false;this.lastseckillTime=null;this.newseckillurl=(!!d.index_newseckill&&!!d.index_newseckill.url)?d.index_newseckill.url:"http://ms.m.jd.com/seckill/seckillList";this.sliderInit(d);this.seckillInit(d);this.floatLayerInit(d.indexFloatLayer);this.recommendInit(d.recommend);this.hasAppBanner=d&&d.appBanner?d.appBanner.isOpen:false;this.appBannerType=d&&d.appBanner?d.appBanner.indexClientType:0;this.beenshield=false;this.recommendhasrender=false;this.appBannerID="download_banner";this.openapp="download_openapp";this.openweb="download_openweb";this.bannerobj=(!!d.appBanner&&!M.object.isEmpty(d.appBanner.banner))?d.appBanner.banner:null;this.openReportTime=(!!d.reporttime&&!M.object.isEmpty(d.reporttime.isOpen))?d.reporttime.isOpen:null;this.slider=[];this.ishttpinvoke=(d._hybridinvoke&&d._hybridinvoke.ishttpinvoke)?d._hybridinvoke.ishttpinvoke:false;this.rotatetime=(!!d.rotatetime)?d.rotatetime:3;this.ismeritco=(!!d.ismeritco)?d.ismeritco:false;this.meritcopin=(!!d.ismeritco&&!!d.meritpin)?d.meritpin:"";this.$=$(window)}var c="";var c=d.searchland.searchBoxWord;this.searchLand=new (M.exports("searchland").clazz)({showFuncObj:{source:this,func:function(){this.indexBodyheight=$("body").height();$("body").css("height","auto");var f=$("#"+this.appBannerID+"");if(f&&f.height()>0){var g=$("#fixedtop");var j=$("#topheader");var e=g.children("div");for(var h=0;h<e.length;h++){if(!$(e[h]).attr("search_land_searchTransformation_show")){$(e[h]).css("display","none")}}j.css("display","none")}}},hideFuncObj:{source:this,func:function(){$("#index_clear_keyword").hide();$("body").css("height",this.indexBodyheight);var f=$("#"+this.appBannerID+"");var g=$("#fixedtop");g.css("display","none");var e=g.children("div");for(var h=0;h<e.length;h++){if(!$(e[h]).attr("search_land_searchTransformation_show")){$(e[h]).css("display","block")}}setTimeout(function(){var i={display:"block"};g.css(i);if(g[0].className.indexOf("showfixedtop-half")<0&&f.height()>0){var j=$("#topheader");j.css("display","block")}},200);window.scrollTo(0,this.indexloc)}},claerKeywordBtnId:"index_clear_keyword",searchPanelId:"index_search_head",keyword:c,renderId:$(document.body),landSearchWordHide:true,hotKeyword:d.searchland.hotKeyword?d.searchland.hotKeyword:null,submitId:"index_search_submit",formId:"index_searchForm",catelogyListId:"index_category",keywordId:"index_newkeyword",isHome:true,closeSearchLandBtnId:"index_search_bar_cancel"});this.imgLazyLad=new (M.exports("Imglazyload").clazz)();this.runtopId="indexToTop"},pseudouuid:function(g){var d=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];var c=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];var j=7;var h=[];h.push(d[this.random(d.length)]);for(var f=1,e=j-1;f<e;f++){if(f%2==0){h.push(this.random(10))}else{h.push(c[this.random(26)])}}h.push(this.random(10));return h.join("")},random:function(c,d){if(!!!d){d=0}return Math.floor(d+Math.random()*(c-d))},sliderInit:function(g){var c=this;if(g.sliderImgList&&M.object.isArray(g.sliderImgList)){c.sliderImgList=g.sliderImgList}else{c.sliderImgList=[]}if(g.hybridslider&&M.object.isArray(g.hybridslider)){c.hybridslider=g.hybridslider;c._lazyslider={list:[],count:0};for(var d=0,e=c.hybridslider.length;d<e;d++){var k=c.hybridslider[d];var l=k.floorid;var h=k.no;c._lazyslider.list.push({id:"#slider_"+l+"_"+h+"_touch",created:false})}}else{c.hybridslider=[]}c._sliderImgList={};c._hybridslider={};for(var f=0,m=c.sliderImgList.length;f<m;f++){var n=c.sliderImgList[f];c._sliderImgList[f]=n}for(var f=0,m=c.hybridslider.length;f<m;f++){var n=c.hybridslider[f];c._hybridslider[n.floorid]=n}},sliderHTML:function(){var e=[];var h=this;for(var d=1;d<h.sliderImgList.length;d++){var c=h.sliderImgList[d];e.push('<li  data-ul-child="child"  class="slide-li"  ><a class="J_ping"  report-eventlevel="1" report-eventid="MHome_BFocusPic" report-eventparam="'+c.sourceValue+'" page_name="index" href="'+c.action+'" ><img   src="'+c.horizontalImag.replace(/http:/g,"")+'"  /></a></li>')}e=e.join("");var g=$("#slider_touch");g.append(e);var f=g.children("li").first().height()+"px";g.css({"min-height":f})},seckillInit:function(k,d){var c=this;if(k.seckill){var o=(d&&(c.seclayout.gapwidth>0))?(' style = "width:'+c.seclayout.gapwidth+'px"'):"";if(!!!d){c.seclayout={urlobj:$("#seckillul"),liobj:null,urlwidth:0,gapwidth:0,more:50}}if(k.seckill.seckillTime&&k.seckill.timeRemain){c.endTime=k.seckill.seckillTime;c.timeRemain=k.seckill.timeRemain;var g=k.seckillImgList;c.seclayout.seclist=g;c.seclayout.container=c.seclayout.urlobj.parent();var e=[];var h="";if(g!=null){for(var j=d?0:3,m=g.length;j<m;j++){var l=g[j];var f=l.wareId?("?wareId="+l.wareId):"";e.push('<li class="seckill-new-item" '+o+'><div class="seckill-item-img bdr-r"><a report-eventid="MHome_BHandSeckill" report-eventlevel="1"  report-eventparam="'+l.sourceValue+'" page_name="index" href="'+c.newseckillurl+f+'" class="seckill-new-link J_ping"><img width="100%"  '+(d?('src="'+l.imageurl.replace(/http:/g,"")+'"'):(' src="'+c.url+'/images/index/seckill-220-new.png" imgsrc="'+l.imageurl.replace(/http:/g,"")+'" '))+' border="0" class="seckill-photo" /><div class="seckill-tip tagType-seckill-'+l.tagType+"  tagCount-seckill-"+l.tagCount+'">'+l.tagText+'</div></a></div><div class="seckill-item-price"><span class="seckill-new-price">&yen;'+l.miaoShaPrice+'</span><span class="seckill-original-price">&yen;'+l.jdPrice+"</span></div></li>")}if(g.length>3){e.push('<li class="seckill-all-item"><a href="'+c.newseckillurl+'"><div class="seckill-all"><i class="show-all-icon"></i><span class="show-all-title">查看全部</span></div></a></li>');if(d){c.seclayout.urlobj.html(e.join(""))}else{c.seclayout.urlobj.append(e.join(""))}}}c.seckillTime=1000;var n=$("#seckill_time").find("span");c.timezone=[n.eq(0),n.eq(1),n.eq(2),n.eq(3),n.eq(4),n.eq(5),n.eq(6),n.eq(7)];c.seckillTimer()}}},seckillTimer:function(){var c=this;var d=M.localstorage.get("index_seckill");var n=0;if(d){d=d.split("_");var k=d[0];var r=parseInt(d[1],10);var q=M.date.toDate(d[2]);var s=parseInt(d[3],10);if(c.endTime==k&&c.timeRemain==r){var e=new Date();var j=parseInt((e.getTime()-q.getTime())/1000,10);n=s-j;M.localstorage.set("index_seckill",c.endTime+"_"+c.timeRemain+"_"+M.date.toString(e,"yyyy-MM-dd HH:mm:ss")+"_"+n)}else{var e=new Date();n=c.timeRemain;M.localstorage.set("index_seckill",c.endTime+"_"+c.timeRemain+"_"+M.date.toString(e,"yyyy-MM-dd HH:mm:ss")+"_"+n)}}else{var e=new Date();n=c.timeRemain=c.timeRemain-1;M.localstorage.set("index_seckill",c.endTime+"_"+c.timeRemain+"_"+M.date.toString(e,"yyyy-MM-dd HH:mm:ss")+"_"+n)}var o=c.timezone;if(n>0){var t=n%60;var g=parseInt(n/60,10);var i=g%60;var h=parseInt(g/60,10);if(h<=0){o[0].text("0");o[1].text("0")}else{if(h>99){o[0].text("9");o[1].text("9")}else{if(h>9&&h<99){var h=h+"";o[0].text(h[0]);o[1].text(h[1])}else{var h=h+"";o[0].text("0");o[1].text(h[0])}}}if(i<=0){o[3].text("0");o[4].text("0")}else{if(i>9){i=i+"";o[3].text(i[0]);o[4].text(i[1])}else{o[3].text(0);o[4].text(i)}}if(t<=0){o[6].text("0");o[7].text("0")}else{if(t>9){t=t+"";o[6].text(t[0]);o[7].text(t[1])}else{o[6].text(0);o[7].text(t)}}}else{o[0].text("0");o[1].text("0");o[3].text("0");o[4].text("0");o[6].text("0");o[7].text("0");c.seckillpause=true;var f=document.getElementById("seckill_loading");var p=function(){M.http.ajax({url:"/index/nextseckill.action?r="+new Date().getTime(),data:"_format_=json",success:function(u){if(u&&u.seckill){try{data=JSON.parse(u.seckill);var m={seckill:{}};if(data&&data.indexMiaoSha.length>0){m.seckill={seckillTime:data.overDate,timeRemain:data.timeRemain};m.seckillImgList=data.indexMiaoSha}c.seckillInit(m,true);c.seckillpause=false;if(c.seclayout){seckillimg=c.seclayout.urlobj.find("img");c.resizeSeckZone();var w=seckillimg.length;seckillimg.each(function(){var x=this;x.onload=function(){w--;if(w%5==0){c.resizeSeckimg(seckillimg)}}})}}catch(v){c.log("nextseckill error!",v);data=null}f.className=""}},error:function(m){f.className=""}})};if(c.lastseckillTime!=null&&((new Date()).getTime())-c.lastseckillTime.getTime()<3600000){return}if(c.autoseckill){c.lastseckillTime=new Date();f.className="seckill-loading";f.onclick=null;var l=c.random(5)+Math.random();setTimeout(p,l*1000)}else{f.className="seckill-nextsec";var l=0;f.onclick=p}}},seckillRun:function(d){var c=this;c.seckillTime=c.seckillTime-d;if(c.seckillTime==0){c.seckillTime=1000;if(c.seckillpause){return}c.seckillTimer()}},seckillRender:function(){var c=this;c.thread.addOne({name:"seckill",event:c.seckillRun,source:c})},appBannerBind:function(){var q=this;var c=!!q.bannerobj?q.bannerobj:{content1:"免费领取188元大礼包",content2:"首次下单前即可领取",fontSizeOne:"13px",fontSizeTwo:"13px",colorOne:"#FFFFFF",colorTwo:"#999999",iconColor:"#FFFFFF",logo:(q.url+"/images/index/top-jdlogo.png"),icon:"立即领取"};var t=q.appBannerID;var s=q.openapp;var l=q.openweb;var v=q.appBannerType;var k=document.createElement("div");k.id=t;var m=!!c.bg;k.className="download-pannel"+(!m?" download-noBg":"");var y=c&&c.fontSizeOne&&c.colorOne?"font-size:"+c.fontSizeOne+";color:"+c.colorOne+";":"";var n=c&&c.fontSizeTwo&&c.colorTwo?"font-size:"+c.fontSizeTwo+";color:"+c.colorTwo+";":"";var h=c&&c.iconColor?"color:"+c.iconColor+";":"";var f=[];if(m){f.push('<div class="pannel-bg"><img src="'+c.bg+'"></div>')}f.push('<div class="download-close"><img  id="'+l+'"   src="'+q.url+'/images/index/icon-close-banner.png"></div>');f.push('<div class="download-logo"><img src="'+c.logo+'"></div>');f.push('<div class="download-txt"><span class="download-content"><em class="content-up" style="'+y+'">'+c.content1+'</em><em class="content-down"style="'+n+'">'+c.content2+"</em></span></div>");f.push('<div class="download-action"><a id="'+s+'" href="javascript:;"><span '+(c.icon.length<=4?'class="font-large"':"")+'style="'+h+'">'+c.icon+"</span></a></div>");k.innerHTML=f.join("");$("#index_search_main").before(k);var p=$("#"+t);if(q.hasAppBanner){p.on("touchmove",function(e){if(e&&e.preventDefault){e.preventDefault()}else{window.event.returnValue=false;return false}});$("#"+s+"").on("touchmove",function(e){if(e&&e.preventDefault){e.preventDefault()}else{window.event.returnValue=false;return false}});$("#"+l+"").on("touchmove",function(e){if(e&&e.preventDefault){e.preventDefault()}else{window.event.returnValue=false;return false}});var g=navigator.userAgent.indexOf("360 Aphone")>=0||navigator.userAgent.indexOf("QHBrowser")>=0||navigator.userAgent.indexOf("360 Iphone")>=0;var z=M.url.getParam("utm_campaign");if(z&&z=="t_vivobrowser_vivobrowser"){g=true}if(!g){var k=document.createElement("div");var o=null;var x=null;var j=null;var u=null;switch(v){case 1:o="MDownLoadFloatTop_OpenImmediately";x="MDownLoadFloatTop_CloseImmediately";u="MDownLoadFloatTop_Expose_VirtualImmediately";j="//h5.m.jd.com/active/download/download.html?channel=jd-mxz3";break;case 2:o="MDownLoadFloatTop_OpenNow";x="MDownLoadFloatTop_Close";u="MDownLoadFloatTop_Expose_Virtual";j="//h5.m.jd.com/active/download/download.html?channel=jd-mxz1";break;case 0:o="MDownLoadFloatTop_OpenC";x="MDownLoadFloatTop_CloseC";u="MDownLoadFloatTop_Expose_VirtualC";j="//h5.m.jd.com/active/download/download.html?channel=jd-mcs1";break;default:break}var d={openAppBtnId:s,closePanelBtnId:l,closePanelId:t,downAppURl:j,closeCallblack:function(){var e=this;p.attr("search_land_searchTransformation_show","true");e.indexFloatLayerRunOpen=true;$("#topheader").css("display","none");e.beenshield=true},closeCallblackSource:q,cookieFlag:"m_index",openAppEventId:o,closePanelEventId:x,sourceType:"M",sourceValue:"index"};$.downloadAppPlugIn(d);if(p.css("display")!="none"){try{var r=new MPing.inputs.Click(u);r.event_param="";var i=new MPing();i.send(r)}catch(w){q.log("mping virtual errpr",w)}}}else{q.indexFloatLayerRunOpen=true}}else{q.indexFloatLayerRunOpen=true}},floatLayerInit:function(c){var d=this;if(c&&c.url&&$.trim(c.url)!="0"){d.floatUrl=c.url;d.indexFloatLayerId="indexFloatLayer";d.indexFloatLayerRunOpen=false;d.indexFloatLayerRunTimer=0}},navigatorRender:function(g){g=isNaN(Number(g))?-1:Number(g);var c=[];var d=this.navigator;var l=false;var j=d==null?null:d.navigationconfig;if(d==null||typeof(j)=="undefined"||j.length<4||j.length>5){return}var e=this.url==null?"":this.url;e=(d.isdefault&&d.isdefault==1)?e:"";c.push('<div class="floor bottom-bar-pannel"><div class="floor-container '+(l?"bdr-top":"")+'">');c.push('<ul class="tab'+j.length+'">');for(var f=0,k=j.length;f<k;f++){var h=(f==g)?j[f].optlableImage:j[f].lableImage;if(f==g){j[f].murl="javascript:void(0)"}if(k==5&&f==2){c.push('<li><span class="bar-img"></span></li>')}else{c.push('<li><span class="bar-img"><a class="J_ping" report-eventlevel="1" report-eventid="MHome_BBottomTab"  report-eventparam="'+j[f].functionId+'" page_name="index" href="'+j[f].murl+'"><img src="'+e+h.replace(/http:/g,"")+'"></a></span></li>')}}c.push("</ul></div></div>");if(j.length==5){c.push('<div class="floor bottom-bar-activity"><span class="bar-img">');c.push('<a class="J_ping" report-eventlevel="1" report-eventid="MHome_BBottomTab"  report-eventparam="'+j[2].functionId+'" page_name="index" href="'+j[2].murl+'"><img src="'+e+j[2].lableImage.replace(/http:/g,"")+'"></a>');c.push("</span></div>")}$("#newviewport").append(c.join(""))},floatLayerRender:function(){var c=this;if(c.floatUrl){c.thread.addOne({name:"floatLayer",event:function(){var e=this;if(e.indexFloatLayerRunOpen){if($("#"+e.indexFloatLayerId).css("transform")=="none"||$("#"+e.indexFloatLayerId).css("-webkit-transform")=="none"||$("#"+e.indexFloatLayerId).css("transform")==""||$("#"+e.indexFloatLayerId).css("-webkit-transform")==""||$("#"+e.indexFloatLayerId).css("transform")=="translateX(0px)"||$("#"+e.indexFloatLayerId).css("-webkit-transform")=="translateX(0px)"){if(e.indexFloatLayerRunTimer>12){e.indexFloatLayerRunTimer=0}e.indexFloatLayerRunTimer++;if(e.indexFloatLayerRunTimer==12){var d={transform:"translateX(40px)","-webkit-transform":"translateX(40px)","-webkit-transition":"0.2s ease 0s",transition:"0.2s ease 0s"};$("#"+e.indexFloatLayerId).css(d);setTimeout(function(){var f={transform:"translateX(40px)","-webkit-transform":"translateX(40px)","-webkit-transition":"",transition:""};$("#"+e.indexFloatLayerId).css(f)},200)}}else{e.indexFloatLayerRunTimer=0}}},source:c});c.floatLayerBind();$("#"+c.indexFloatLayerId).css("display","block")}},floatLayerBind:function(){var c=this;if(c.floatUrl){$("#"+c.indexFloatLayerId).on("click",function(){var d={transform:"translateX(0px)","-webkit-transform":"translateX(0px)","-webkit-transition":"0.2s ease 0s",transition:"0.2s ease 0s"};$("#"+c.indexFloatLayerId).css(d);setTimeout(function(){location.href=c.floatUrl},200)})}},searchhandler:function(){var c=this;document.getElementById("index_newkeyword").addEventListener("click",function(g){if(!!!c.searchLand.openSearchLoad){try{var f=new MPing.inputs.Click("MHome_BSearch");f.event_param="";f.event_level="1";var d=new MPing();d.send(f)}catch(g){}}});c.searchLand.render()},toTopBind:function(){var c=this;$("#"+c.runtopId).on("click",function(){window.scrollTo(0,0);var d=$("#"+c.appBannerID+"");if(d&&d.height()>0){var e=$("#fixedtop");var f=$("#topheader");e.removeClass("showfixedtop-half").addClass("showfixedtop");f.css("display","block");c.under=1}if($("#slider").height()>0){$($("#index_search_head").children()[0]).css("opacity",0)}})},recordIndexLoc:function(){var e=this;$("#index_searchLogin").on("click",function(){M.cookie.setCookie("location",$(window).scrollTop(),0.0035,"","jd.com")});var c=M.url.getParam("indexloc");if(c&&c=="1"){var f=M.cookie.getCookie("location");M.cookie.delCookie("location");var d=parseInt(f);if(!isNaN(d)){$(window).on("load",function(){window.scrollTo(0,d);if(d>=50){var g=$("#"+e.appBannerID+"");if(g&&g.height()>0){topheader.css("display","none");fixedtop.removeClass("showfixedtop").addClass("showfixedtop-half")}}})}}},recommendInit:function(d){var c=this;if(d){c.recommendPin=d.pin;c.recommendUesCached=d.useCached;c.recommendOpen=d.open;c.recommendPage=0;c.recommendPageCount=1;c.recommendDataCount=0;c.recommendListId="recommendList";c.recommendListLoadId="recommendListload";c.recommendListloadImg="recommendListloadImg";c.recommendListLoadMoreBtn="recommendListLoadMoreBtn";c.recommendCanLoad=true;c.recommendloadHeight=0;c.hasRecommenddata=true}},recommendLoadData:function(){var c=this;if(c.recommendCanLoad&&c.hasRecommenddata){c.recommendCanLoad=false;$("#"+c.recommendListLoadId).css("display","block;");$("#"+c.recommendListloadImg).css("display","block;");$("#"+c.recommendListLoadMoreBtn).css("display","none;");var l="indexRecommendData_new";var i=null;if(c.recommendUesCached){var f=M.localstorage.get(l);try{f=JSON.parse(f)}catch(j){c.log("Line728_dataArr");f=null}if(f&&f.length==2){if(c.recommendPin){i=f[1];if(i.length>=(c.recommendPage+1)){i=i[c.recommendPage]}else{i=null}}else{i=f[0];if(i.length>=(c.recommendPage+1)){i=i[c.recommendPage]}else{i=null}}if(!i||(new Date().getTime()-i.updateTime)>(4*60*60*1000)||i.pin!=c.recommendPin){i=null}}else{try{var k=JSON.stringify([[],[]]);M.localstorage.set(l,k)}catch(j){}}}else{M.localstorage.remove(l)}if(i==null){M.http.ajax({url:"/index/recommend.action",data:"_format_=json&page="+(c.recommendPage+1),success:function(r){var q=false;var u=false;if(r&&r.recommend){try{i=JSON.parse(r.recommend)}catch(t){c.log(t,"error");i=null;c.hasRecommenddata=false}if(i&&i.wareInfoList&&i.wareInfoList.length>0){i.recommendList=i.wareInfoList}if(i&&i.recommendList&&i.recommendList.length==0){c.hasRecommenddata=false;u=true}if(i&&i.recommendList&&i.recommendList.length>0){if(c.recommendPage==0){var n=c.recommendMainHtml(i);$("#newviewport").append(n);c.recommendBind();c.recommendAddExposeBind()}var m=Math.floor(c.recommendDataCount/2);var p=c.recommendListHtml(i);$("#"+c.recommendListId).append(p);c.calculationRecommendImg();setTimeout(function(){(function(A){var x=$(".similar-li"),B=null,z=null,w=null,e=null;var v=A;A=Math.floor(x.length/2);for(var y=v;y<A;y++){B=$(x[y*2]).find(".sam-price");z=$(x[y*2+1]).find(".sam-price");w=$(x[y*2]).find(".sam-space");e=$(x[y*2+1]).find(".sam-space");if(B.length>0&&z.length==0&&e[0].className.indexOf("sam-height")==-1){e.addClass("sam-height")}else{if(B.length==0&&z.length>0&&w[0].className.indexOf("sam-height")==-1){w.addClass("sam-height")}}}})(m)},100);if(c.recommendUesCached){i.updateTime=new Date().getTime();i.pin=c.recommendPin;var o=M.localstorage.get(l);try{o=JSON.parse(o)}catch(t){o=null}if(o&&M.object.isArray(o)){if(c.recommendPin){if(o[1].length>=(c.recommendPage+1)){o[1][c.recommendPage]=i}else{o[1].push(i)}}else{if(o[0].length>=(c.recommendPage+1)){o[0][c.recommendPage]=i}else{o[0].push(i)}}}try{M.localstorage.set(l,JSON.stringify(o))}catch(t){}}c.recommendPage++;var s=M.url.getParam("recommend");if(s=="1"&&c.recommendPage==1){M.url.setHash("recommend");window.location=window.location}c.imgLazyLad.lazyLad();c.recommendloadHeight=$("#scwrapper").height()-$("#"+c.recommendListId).find("li").eq(0).height()*4;if(c.recommendPage%3==0&&c.hasRecommenddata){q=true}else{q=false}u=true}}if(u){if(q){$("#"+c.recommendListLoadId).css("display","block;");$("#"+c.recommendListloadImg).css("display","none;");$("#"+c.recommendListLoadMoreBtn).css("display","block;")}else{$("#"+c.recommendListLoadId).css("display","none;");$("#"+c.recommendListloadImg).css("display","none;");$("#"+c.recommendListLoadMoreBtn).css("display","none;");c.recommendCanLoad=true}}else{c.recommendloadHeight=$("#scwrapper").height()-$("#"+c.recommendListId).find("li").eq(0).height()*4;c.recommendCanLoad=false;$("#"+c.recommendListLoadId).css("display","none;");$("#"+c.recommendListloadImg).css("display","none;");$("#"+c.recommendListLoadMoreBtn).css("display","none;")}},error:function(){c.recommendloadHeight=$("#scwrapper").height()-$("#"+c.recommendListId).find("li").eq(0).height()*4;c.recommendCanLoad=false;$("#"+c.recommendListLoadId).css("display","none;");$("#"+c.recommendListloadImg).css("display","none;");$("#"+c.recommendListLoadMoreBtn).css("display","none;")}})}else{if(c.recommendPage==0){var d=c.recommendMainHtml(i);$("#newviewport").append(d);c.recommendBind();c.recommendAddExposeBind()}var g=c.recommendListHtml(i);$("#"+c.recommendListId).append(g);c.calculationRecommendImg();var h=M.url.getParam("recommend");c.recommendPage++;c.recommendloadHeight=$("#scwrapper").height()-$("#"+c.recommendListId).find("li").eq(0).height()*4;if(h=="1"&&c.recommendPage==1){M.url.setHash("recommend");window.location=window.location}c.imgLazyLad.lazyLad();if(c.recommendPage%3==0&&c.hasRecommenddata){$("#"+c.recommendListLoadId).css("display","block;");$("#"+c.recommendListloadImg).css("display","none;");$("#"+c.recommendListLoadMoreBtn).css("display","block;")}else{$("#"+c.recommendListLoadId).css("display","none;");$("#"+c.recommendListloadImg).css("display","none;");$("#"+c.recommendListLoadMoreBtn).css("display","none;");c.recommendCanLoad=true}}}c.recommendhasrender=true},recommendMainHtml:function(e){var d=this;var c=[];if(e&&e.recommendList&&e.recommendList.length>0){c.push('<div id="recommend" class="floor love-floor" id="love-floorID">');c.push('<div class="gray-text"><span class="gray-layout"><span class="gray-text-img"></span>为您推荐</span></div>');c.push('<ul class="find-similar-ul cf" id="'+d.recommendListId+'">');c.push("</ul>");c.push('<div style="clear: left;"></div>');c.push('<div style="display: none;" class="swipe-up love-loading" id="'+d.recommendListLoadId+'">');c.push('<div class="swipe-up-wrapper ">');c.push('<div style="display: none;" id="'+d.recommendListloadImg+'" class="loading-con">');c.push('<span class="pagenum" id="showPageID"></span>');c.push('<span class="loading"><i class="love-loading-icon">加载中...</i></span>');c.push('<div class="clear"></div>');c.push("</div>");c.push('<div style="display: none;" id="'+d.recommendListLoadMoreBtn+'" class="click-loading"><a href="javascript:void(0);">点击继续加载</a></div>');c.push("</div>");c.push("</div>");c.push("</div>")}return c.join("")},recommendListHtml:function(f){var c=this;var e=c.url==null?"":c.url;var h=[];if(f&&f.recommendList&&f.recommendList.length>0){for(var g=0;g<f.recommendList.length;g++){var d=f.recommendList[g];var k=d.itemType;var l=d.clickUrl;if((k&&k!="0")||(d.type&&d.type!="ware")){continue}c.recommendDataCount++;h.push('<li class="similar-li"><a  '+((!!l)?(' clickUrl="'+l+'" '):"")+' class="J_ping" report-eventlevel="1" report-eventid="MHomeGuessYouLike_BProducts"  report-eventparam="'+d.sourceValue+'" page_name="index" href="http://item.m.jd.com/product/'+d.wareId+'.html">');h.push('<div  class="similar-product"><img alt="'+d.wname+'" class="Jschangewidth" src="'+e+'/images/index/m-home-pic-new.png" imgsrc="'+d.imageurl.replace(/http:/g,"")+'" >');h.push('<span class="similar-product-text">');if(!!d.isSamWare){h.push('<img src="'+c.url+'/images/index/samsb.png" class="samsb">')}h.push(d.wname+"</span>");h.push('<span class="similar-product-price">');if(!!d.jdPrice){d.jdPrice=d.jdPrice+"";var j=d.jdPrice.split(".");if(!!j){h.push("&yen;");if(!!j[0]){h.push('<span class="big-price">'+j[0]+"</span>")}if(!!j[1]){h.push('<span class="small-price">.'+j[1]+"</span>")}}}h.push('<span class="guess-button J_ping" report-eventlevel="1" report-eventid="MHomeGuessYouLike_BSimilarities"  report-eventparam="'+(c.recommendPage*20+g+1)+"_"+d.wareId+'_1" page_name="index" onclick="event.preventDefault();window.location.href=\'//home.m.jd.com/myjd/similar/list.action?skuId='+d.wareId+"'\"  >看相似</span>");h.push("</span>");if(!!d.samPrice){var m=d.samPrice+"";h.push('<span class="sam-price">&yen;'+m+"</span>")}h.push('<span class="sam-space"></span>');h.push("</div></a>");h.push("</li>")}}return h.join("")},recommendAddExposeBind:function(){document.getElementById("recommend").addEventListener("click",function(f){try{var d=f.target||f.srcElement;while(d.id!="recommend"&&d.tagName.toLowerCase()!="a"){d=d.parentNode}if(d.tagName.toLowerCase()=="a"){var c=d.getAttribute("clickUrl");if(c!=null){$.getJSON(c+"&jsoncallback=?",function(e){})}}}catch(f){source.log("recommendAddExposeBind error!",f)}})},recommendBind:function(){var c=this;if(c.recommendOpen){$("#"+c.recommendListLoadMoreBtn).on("click",function(d){c.recommendCanLoad=true;c.recommendLoadData()})}},recommendRender:function(){var c=this;if(c.recommendOpen&&!c.recommendhasrender){c.recommendLoadData();c.recommendhasrender=true}},calculationRecommendImg:function(){var d=this;var c=$("body").width();$("#"+d.recommendListId).find(".Jschangewidth").forEach(function(f,e){var g=$(f).parent().width();$(f).css({width:g,height:g})})},resizeFunction:function(){var f=this;var d="onorientationchange" in window;var c=d?"orientationchange":"resize";var e=null;if(this.seclayout){e=this.seclayout.urlobj.find("img");f.resizeSeckZone();var g=e.length;e.each(function(){var h=this;h.onload=function(){g--;if(g%5==0){f.resizeSeckimg(e)}}})}$(window).on(c,function(){if(f.recommendOpen&&f.recommendCanLoad){f.recommendloadHeight=$("#scwrapper").height()-$("#"+f.recommendListId).find("li").eq(0).height()*4}f.calculationRecommendImg();try{var i=navigator.userAgent.indexOf("iPhone")>=0&&navigator.userAgent.indexOf("MQQBrowser")>=0;if(!i&&f.seclayout){f.resizeSeckZone();f.resizeSeckimg(e,true)}}catch(j){f.log("resizeSeckimg error!",j)}f.imgLazyLad.lazyLad();f.imgLazyLad.squareImg(".square-img");var h=$(".shop-img").width()/2;$(".shop-img").find("img").css({width:h,height:h})})},resizeSeckZone:function(){var f=this.seclayout;if(f==null||f.seclist==null||f.seclist.length<=3){return}var d=f.urlobj.find("li");var g=(f.container.width()-50)/3;for(var e=0,c=d.length-1;e<c;e++){d[e].style.width=g+"px"}f.gapwidth=g;f.urlwidth=g*(d.length-1)+f.more;f.urlobj.width(f.urlwidth);if(f.touchobj){f.touchobj.fixetRootWidth(f.urlwidth-f.container.width());f.touchobj.basegap=f.gapwidth;f.touchobj.goToEnd(10,f.touchobj.tar,f.touchobj.rootWidth,null)}},resizeSeckimg:function(g,f){for(var e=0,c=g.length;e<c;e++){var d=parseInt($(g[e]).width(),10);var h=parseInt($(g[e]).height(),10);if(f||d!=h){$(g[e]).height(d+"px")}}},loadSeckimg:function(g,f){var j=($(window).width()-20)/3;for(var e=3,c=g.length;e<c;e++){g[e].style.width=j+"px";g[e].style.height=j+"px";var d=parseInt($(g[e]).width(),10);var h=parseInt($(g[e]).height(),10);if(f||d!=h){$(g[e]).height(d+"px")}}},sliderlazyload:function(){var t=this;var r=t._lazyslider;if(r==null){return}var o=r.list;if(r.count>=o.length){return}var E=new Date();var n=t.$.height();var f=t.$.scrollTop();for(var x=0,y=o.length;x<y;x++){if(o[x].created){continue}var h=$(o[x].id);if(h.length==0){continue}var p=h.offset().top-n-200;if(parseInt(f)>=parseInt(p)){for(var w=x,z=t.hybridslider.length;w<z;w++){var c=t.hybridslider[w];var d=[];var B=c.floorid;var s=c.no;if(o[x].id.indexOf(B+"_"+s)<0){continue}t._lazyslider.count++;o[x].created=true;var D=c.sliderlist;for(var v=1,A=D.length;v<A;v++){var g=D[v];d.push('<li  data-ul-child="child"  class="slide-li"  ><a class="J_ping" report-eventlevel="1" report-eventid="MHome_BFloor" report-eventparam="'+g.sourceValue+'" page_name="index" href="'+g.url+'" ><img   src="'+g.img.replace(/http:/g,"")+'"  /></a></li>')}d=d.join("");var l=$("#slider_"+B+"_"+s+"_touch");l.append(d);var q=l.children("li").first().height()+"px";l.css({"min-height":q,overflow:"hidden"});var u=slide("#slider_"+B+"_"+s);try{u.init({loop:true,_floorid:B,smallBtn:true,autoPlay:true,autoHeight:true,playTime:3000,callback:function(e){k(t,this._floorid,e)}});t.slider.push(u)}catch(C){t.log(o[x].id+" error!",C)}}}}function k(m,j,i){if(!!m.searchLand.openSearchLoad){return}if(!!!m.ishttpinvoke){return}i--;if(m._hybridslider==null||m._hybridslider[j]==null){return}var e=m._hybridslider[j];if(!m.inviewport("#slider_"+e.floorid+"_"+e.no)){return}var F=e.sliderlist;if(F==null||F[i]==null||F[i].exposalUrl==null||F[i].exposalUrl==""||!!F[i].hasexposal){return}F[i].hasexposal=true;m.imgHttp(F[i].exposalUrl)}},inviewport:function(f){if(f==null||$(f)==null){return false}var d=this;var e=d.$.scrollTop();var c=$(f).offset().top;if(!!!d.$h){d.$h=d.$.height()}return c>=e&&c<=(e+d.$h)},imgHttp:function(c){if(c==null||c==""){return}var e=this;var f=new Image(1,1);var d=c.indexOf("?")>-1?(c+"&_="+new Date().getTime()):(c+"?_="+new Date().getTime());f.src=d},scrollFunction:function(){var o=this;var g,n,q,r,u,y,w,p,s,x,z,e,h;var k=1;var d={};o.under=1;p=0,s=0.85;$(document).ready(function(){g=$($("#index_search_head").children()[0]);n=$("#index_search_main");q=$("#fixedtop");r=$("#topheader");z=$("#"+o.appBannerID+"");var f=$("#slider");u=g.height();y=f.height()-u;h=z.height();o.$h=o.$.height();o.searchbarrgb=g.css("opacity")});o.$.on("load",function(){y=y<0?($("#slider").height()-u):y;x=$(window).scrollTop()<=y?0:1;setTimeout(function(){var K=$(window).scrollTop();x=1;j(K);if(K>0){o.imgLazyLad.lazyLad()}o.imgLazyLad.squareImg(".square-img");var J=$(".shop-img").width()/2;$(".shop-img").find("img").css({width:J,height:J})},0);var I=$(window).scrollTop();if(navigator.userAgent.indexOf("baidubrowser")>0&&navigator.userAgent.indexOf("Android")>0&&I>0){window.scrollTo(0,I+1)}var G=3;var D=setInterval(function(){if(o.hasAppBanner&&(z!=null&&(z.css("display")=="none"||z.height()==0))&&(r.css("display")=="block")){r.css("display","none");o.beenshield=true}if(--G==0){clearInterval(D)}},200);setTimeout(function(){if(o.$.scrollTop()>200||$("#scwrapper").height()<=o.$.height()){o.recommendRender()}},100);var E=navigator.userAgent.indexOf("MX");if(E!=-1){$(".graphic-img img").css({height:"auto"});$(".floor-tit-img .tit-img").css({height:"auto",width:"22%"})}if($("#scroll-news").length>0){var f=Number(o.rotatetime);setInterval(function(){$("#scroll-news").find(".news-list").animate({"-webkit-transform":"translate3d(0px,-23px, 0px)",transform:"translate3d(0px,-23px, 0px)",},500,"ease",function(){$(this).css({"-webkit-transform":"translate3d(0px,0px, 0px)",transform:"translate3d(0px,0px, 0px)",}).find("li:first").appendTo(this)})},isNaN(f)?3000:f*1000)}if(o.ismeritco&&!!o.meritcopin){setTimeout(function(){M.http.ajax({url:"http://"+o.meritcopin+".web.meritco.m.jd.com?t="+(Date.now()),type:"get",success:function(){}});try{var K=new MPing.inputs.Click("MHome_BPageVirtual");K.event_param=o.meritcopin;var J=new MPing();J.send(K)}catch(L){o.log("mping jiuqian errpr",L)}},0)}if(o.openReportTime){try{if(!!rTimeArr&&M.object.isArray(rTimeArr)){rTimeArr[7]={time:new Date(),sTime:"0"};var C=new R_Time();var H=C.calculateTime(rTimeArr);var A=C.urlParse("sid")||"";var B=C.extend({id:"137",flag:"1",sid:A},H);C.sendTime(B)}}catch(F){o.log("reporttime error!",F)}}});function j(A){if(!!!o.hasActivityImg){g.css("opacity",0.85);return}var f=A;if(f<=y){g.css("opacity",f<u?p:s*((f-u)/y));x=1}else{if(x==1){g.css("opacity",s);x=0}}}var t=null;var m=0;if(o.seclayout){t=o.seclayout.urlobj.offset();m=t.height+t.top}o.$.on("touchstart",function(f){v=false;i=false;var A=f.touches[0];d.starty=A.clientY;d.startx=A.clientX;d.inity=d.starty;d.scrolly=0;d.lastdate=Date.now();d.lastY=0;d.secondzone=f.touches[0].pageY<=m});o.$.on("touchmove",function(C){var E=C.touches[0];var A=E.clientY;var B=E.clientX;var f=o.$.scrollTop();if(f<0){return}d.diry=A-d.starty;d.dirx=B-d.startx;if(Math.abs(d.diry)<=Math.abs(d.dirx)){direct=0;return}var D=A-d.starty;if(D*d.lastgap<0){d.inity=A}d.scrolly=A-d.inity;if(d.diry<0){j(f+Math.abs(d.scrolly))}else{j(f-Math.abs(d.scrolly))}d.starty=A;d.startx=B;d.lastgap=D});$(window).on("touchend",function(f){if(d.secondzone){if(d.diry<0&&o.$.scrollTop()>=0){setTimeout(function(){if(!o.beenshield&&h!=null&&h!=0){r.css("display","none");q.removeClass("showfixedtop").addClass("showfixedtop-half")}},50)}}else{}});var v=false,c=0,i=false,l=new Date();o.$.scroll(function(C){var A=o.$;var f=A.scrollTop();if(f<0){return}var B=z?z.height():50;if(!o.beenshield&&B!=null&&B!=0){if(f==0){if(!i){q.removeClass("showfixedtop-half").addClass("showfixedtop");r.css("display","block");o.under=1;i=true}}else{r.css("display","none");q.removeClass("showfixedtop").addClass("showfixedtop-half");k=1}}if(!!!o.hasActivityImg){g.css("opacity",0.85)}else{if(f<=y){g.css("opacity",f<u?p:s*((f-u)/y));c=0}else{if(c==0){g.css("opacity",s);c=1}}}if(f>=o.$h){$("#"+o.runtopId).show()}else{$("#"+o.runtopId).hide()}if(o.recommendOpen){if(o.recommendCanLoad&&f>=o.recommendloadHeight){o.recommendLoadData()}}o.imgLazyLad.lazyLad();if(!!!o.searchLand.openSearchLoad){o.indexloc=f}else{r.css("display","none")}o.sliderlazyload()})},seckillImgScroll:function(){if(!this.seclayout){return}var d=this.seclayout;var e=this.newseckillurl;if(d.seclist.length<=3){return}var c=new (M.exports("touchHandlerX").clazz)({target:d.urlobj[0],noscroll:false,basegap:d.gapwidth,other:this.slider});c.touchEndfn(function(f){if(f<0){window.location.href=e}});d.touchobj=c;c.run();c.fixetRootWidth(d.urlwidth-d.container.width())},run:function(){var d=this;if(d.hasAppBanner){try{d.appBannerBind()}catch(f){try{$("#"+d.appBannerID+"").remove();$("#topheader").css("display","none")}catch(f){}d.log("Appbanner error!",f)}}d.sliderHTML();if(d.sliderImgList&&d.sliderImgList.length>1){d.hasActivityImg=true;var c=slide("#slider");try{c.init({loop:true,smallBtn:true,autoPlay:true,autoHeight:true,playTime:3000,callback:function(e){(function g(j,i){if(!!j.searchLand.openSearchLoad){return}i--;if(!!!j.ishttpinvoke){return}if(j._sliderImgList==null||j._sliderImgList[i]==null){return}var h=j._sliderImgList[i];if(!j.inviewport("#slider")){return}if(h==null||h.exposalUrl==null||h.exposalUrl==""||!!h.hasexposal){return}h.hasexposal=true;j.imgHttp(h.exposalUrl)})(d,e)}})}catch(f){$("#slider_touch").css("overflow","hidden");d.log("slider error!",f)}d.slider.push(c)}try{if(d.endTime){d.seckillRender()}d.resizeFunction();d.seckillImgScroll()}catch(f){d.log("")}try{d.scrollFunction();d.recordIndexLoc();d.toTopBind()}catch(f){d.log("")}d.searchhandler();d.imgLazyLad.lazyLad(true);d.sliderlazyload();d.thread.start();d.floatLayerRender()},log:function(c,d){console.log("Opps!Something Wrong!Please notice it!--"+c)}});a.clazz=b});M.define("touchHandlerX",function(b){var a=function(d){this.init(d)};M.object.merge(a.prototype,{init:function(d){c.target=null;c.noscroll=false;c.direct=0;c.basegap=0;c.endfn=function(){};c.movefn=function(){};c.startfn=function(){};c.prefix="-webkit-";if(d!=null&&M.object.isObject(d)){M.object.merge(c,d)}},getX:function(f){var e=this;if(!!!f){f=e.tar}var d=$(f).css("transform");if(!d){d=$(f).css("-webkit-transform")}if(d=="none"){d=0}else{d=d.replace("translate3d(","").replace(",0px,0px)","");d=parseFloat(d,10)}if(!d){d=0}return d},goToEnd:function(g,f,k,h){var d=this;var e=null;var l=null;var j=g<0?g:0;var i=g<0?(-k):0;e={transform:"translate3d("+j+"px,0px,0px)",transition:"0.3s ease 0s"};l={transform:"translate3d("+i+"px,0px,0px)"};if(g!=0){d.css($(f),e);setTimeout(function(){d.css($(f),l);if(h){h(i)}},200);return true}},css:function(g,h){var f=c.prefix;var e={};for(var d in h){if(typeof(d)=="string"){e[f+d]=h[d];e[d]=h[d]}}g.css(e)},fixetRootWidth:function(d){this.rootWidth=d;this.screenWidth=$(this.tar).parent().width();this.bannerWidth=this.rootWidth+this.screenWidth},getAnimationobj:function(k){var j=k<0?-1:1;k=Math.abs(k);var h=[],f=0,d=1;var e=this.screenWidth;var i=this.basegap*j;e=[i,i*2];if(!!this.shortmove){return[i,d*0.5]}if(k>0&&k<=e[0]){h.push(i);h.push(d*0.5)}else{if(k>e[0]&&k<=e[1]){h.push(i*2);h.push(d*0.5)}else{if(k>e[1]){h.push(i*3);h.push(d*0.6)}}}return h},animateX:function(d,e){var f={transform:"translate3d("+d+"px,0px,0px)",transition:"-webkit-transform "+e+"s cubic-bezier(0.333333, 0.666667, 0.666667, 1)"};this.css($(this.tar),f)},gotoX:function(f,d){var e=this;if(!!!f){f=this.tar}e.css($(f),{transform:"translate3d("+d+"px,0px,0px)"})},getObj:function(){return this.tar},run:function(){var l=this;var k=c.target;var e=$(k);l.tar=k;l.basegap=c.basegap;var i=null;var m={};var f=0;l.screenWidth=e.parent().width();l.rootWidth=$(k).width()-l.screenWidth;rootWidth=l.rootWidth;var d=[];var j=function(t){if(c.other){for(var r=0,x=c.other.length;r<x;r++){c.other[r].play()}}var p=false;var A=Date.now();if(A-m.lastdate>=1){p=true}if(i==1){i=0;return}var q=t.changedTouches[0];var s=q.clientX;var z=m.initx+s-m.startx;if(z>0||z<(-1*l.rootWidth)){var w=null;if(m.initx-m.startx<-l.rootWidth){w=c.endfn}d.push(setTimeout(function(){l.goToEnd(z,k,l.rootWidth,w)},50));return}var y=s-m.startx;l.shortmove=(y<=l.basegap&&y>=-l.basegap)?true:false;if(p){l.shortmove=true}var v=l.getAnimationobj(y);var u=(l.shortmove&&v[0]>0)?0:v[0];var o=z-(z%l.basegap)+u;if(o>0||o<(-1*l.rootWidth)){var w=null;if(m.initx-m.startx<-l.rootWidth){w=c.endfn}setTimeout(function(){l.goToEnd(o,k,l.rootWidth,w)},50);return}var n=setTimeout(function(){l.animateX(o,v[1])},0);d.push(n);m.lastmovesX=o};e.off("touchend",j);e.on("touchend",j);var h=function(q){var s=q.targetTouches[0];var o=s.pageY;var p=s.pageX;m.diry=o-m.starty;m.dirx=p-m.startx;if(Math.abs(m.dirx)<Math.abs(m.diry)){i=1}else{var n=Date.now();m.lastdate=n;var r=m.initx+p-m.startx;r=r>0?0:r;l.gotoX(e,r);l.preventDefault()}};e.off("touchmove",h);e.on("touchmove",h);var g=function(p){if(c.other){for(var o=0,n=c.other.length;o<n;o++){c.other[o].pause()}}$(k).css("transition","");$(k).css("-webkit-transition","");for(var o=0,n=d.length;o<n;o++){clearTimeout(d[o])}var q=p.targetTouches[0];m.starty=q.pageY;m.startx=q.pageX;m.initx=l.getX(k);m.scrollx=0;m.lastX=0;m.lastdate=0;if(!!!m.lastmovesX){m.lastmovesX=0}};e.off("touchstart",g);e.on("touchstart",g)},preventDefault:function(d){if(d&&ev.preventDefault){d.preventDefault()}else{window.event.returnValue=false}return false},touchEndfn:function(d){c.endfn=M.object.isFunction(d)?d:null},touchMovefn:function(d){c.movefn=M.object.isFunction(d)?d:null},touchStartfn:function(d){c.startfn=M.object.isFunction(d)?d:null},touchfn:function(d){if(M.object.isObject(d)){M.object.merge(c,d)}}});var c=a;b.clazz=a});var ceshi=0;function debug(a){document.getElementById("index_newkeyword").value=a};